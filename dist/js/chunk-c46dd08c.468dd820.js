(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c46dd08c"],{"06ff":function(e,t){e.exports={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],pages:[{id:1,pathname:"Home",slug:"home"},{id:2,pathname:"About",slug:"about"},{id:3,pathname:"Our Programmes",slug:"our-programmes"},{id:4,pathname:"Units",slug:"units"}]}},a869:function(e,t,r){},bb83:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ConsoleHeader"),a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6 text-start"},[a("h1",{staticClass:"m-0 text-dark"},[e._v("Programmes"),a("sup",[a("a",{staticClass:"text-dark",attrs:{href:"javascript:void(0)",title:"Create"},on:{click:function(t){return t.preventDefault(),e.newProgrammeView(t)}}},[a("i",{staticClass:"mdi mdi-plus-circle"})])])])]),a("div",{staticClass:"col-sm-6"},[a("ol",{staticClass:"breadcrumb float-sm-right"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:"/console"}},[e._v("Home")])],1),a("li",{staticClass:"breadcrumb-item active"},[e._v("Programmes")])])])])])]),a("section",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[!1===e.NewProgrammeView?a("div",{staticClass:"pb-5"},[e.programmes.length<1?a("div",{staticClass:"text-start"},[a("b",[e._v("No Programmes added yet!")])]):a("div",{staticClass:"row no-gutters pb-5"},e._l(e.programmes,(function(t){return a("div",{key:t.id,staticClass:"col-xl-3 col-sm-6 col-6 h-100"},[a("div",{staticClass:"small-box bg-dark h-100 pt-4"},[a("div",{staticClass:"inner"},[0===t.image.length?a("div",[a("img",{staticClass:"img-fluid",staticStyle:{width:"8em"},attrs:{src:r("bf05")}})]):a("div",[a("img",{staticClass:"img-fluid",staticStyle:{width:"7em",height:"7em","object-fit":"contain"},attrs:{src:t.image}})]),a("h5",{staticClass:"text-truncate",attrs:{title:t.name}},[e._v(e._s(t.name))])]),a("div",{staticClass:"icon"}),a("div",{staticClass:"small-box-footer mb-0 p-2"},[a("a",{staticClass:"text-light",attrs:{href:"javascript:void(0)"},on:{click:function(r){return e.filterProgramme(t.id)}}},[e._v("More info "),a("i",{staticClass:"fas fa-arrow-circle-right"})]),a("a",{staticClass:"p-2 text-danger",attrs:{href:"javascript:void(0)"},on:{click:function(r){return e.handleDeleteProgramme(t.id)}}},[e._v("Delete")])])])])})),0)]):a("div",[null===e.Programme?a("div",[a("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.handleNewProgramme(t)}}},[a("h3",{staticClass:"text-start"},[a("a",{staticClass:"text-dark",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loadProgrammeView()}}},[a("i",{staticClass:"mdi mdi-chevron-left"})]),e._v(" Create a new programme ")]),a("div",{staticClass:"pb-5"},[a("div",{staticClass:"col-xl-6 col-md-12 my-4"},[a("div",{staticClass:"form-group text-start"},[a("label",{attrs:{for:""}},[e._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control remove-radius",attrs:{type:"text",placeholder:"Enter name",required:""},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),a("div",{staticClass:"form-group text-start"},[a("label",{attrs:{for:""}},[e._v("Description(optional)")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description,expression:"form.description"}],staticClass:"form-control remove-radius",attrs:{placeholder:"Enter description"},domProps:{value:e.form.description},on:{input:function(t){t.target.composing||e.$set(e.form,"description",t.target.value)}}})]),a("div",{staticClass:"form-group text-start"},[a("label",{attrs:{for:""}},[e._v("Venue")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.venue,expression:"form.venue"}],staticClass:"form-control remove-radius",attrs:{type:"text",placeholder:"Enter venue",required:""},domProps:{value:e.form.venue},on:{input:function(t){t.target.composing||e.$set(e.form,"venue",t.target.value)}}})])]),e._m(0)])])]):a("div",[a("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.handleUpdatedProgramme(t)}}},[a("h3",{staticClass:"text-start"},[a("a",{staticClass:"text-dark",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loadProgrammeView()}}},[a("i",{staticClass:"mdi mdi-chevron-left"})]),e._v(" Update programme ")]),a("div",{staticClass:"pb-5"},[a("div",{staticClass:"col-xl-6 col-md-12 my-4"},[a("div",{staticClass:"form-group text-start"},[a("input",{ref:"image",staticClass:"d-none",attrs:{type:"file",name:"file_holder",id:"profile_image"},on:{change:function(t){return t.preventDefault(),e.changeImage(t)}}}),null===e.Programme.image||""===e.Programme.image?a("label",{staticStyle:{cursor:"pointer"},attrs:{for:"profile_image"}},[a("img",{staticClass:"img-fluid",staticStyle:{width:"5em"},attrs:{src:r("bf05")}})]):a("label",{staticStyle:{cursor:"pointer"},attrs:{for:"profile_image"}},[a("img",{staticClass:"img-fluid",staticStyle:{width:"5em"},attrs:{src:e.Programme.image}})])]),a("div",{staticClass:"form-group text-start"},[a("label",{attrs:{for:""}},[e._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.Programme.name,expression:"Programme.name"}],staticClass:"form-control remove-radius",attrs:{type:"text",placeholder:"Enter name",required:""},domProps:{value:e.Programme.name},on:{input:function(t){t.target.composing||e.$set(e.Programme,"name",t.target.value)}}})]),a("div",{staticClass:"form-group text-start"},[a("label",{attrs:{for:""}},[e._v("Description(optional)")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Programme.description,expression:"Programme.description"}],staticClass:"form-control remove-radius",attrs:{placeholder:"Enter description"},domProps:{value:e.Programme.description},on:{input:function(t){t.target.composing||e.$set(e.Programme,"description",t.target.value)}}})]),a("div",{staticClass:"form-group text-start"},[a("label",{attrs:{for:""}},[e._v("Venue")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.Programme.venue,expression:"Programme.venue"}],staticClass:"form-control remove-radius",attrs:{type:"text",placeholder:"Enter venue",required:""},domProps:{value:e.Programme.venue},on:{input:function(t){t.target.composing||e.$set(e.Programme,"venue",t.target.value)}}})])]),e._m(1)])])])])])])]),a("ConsoleFooter")],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-xl-6 col-md-12 mb-2 text-start"},[r("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[r("i",{staticClass:"fa fa-save"}),e._v(" Save")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-xl-6 col-md-12 mb-2 text-start"},[r("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[r("i",{staticClass:"fa fa-save"}),e._v(" Save")])])}],i=(r("4de4"),r("96cf"),r("1da1")),n=r("5530"),o=r("2e673"),m=r("fb8e"),c=r("2f62"),l=r("06ff"),u=r.n(l),d=r("bc3a"),g=r.n(d),p=r("c5b9"),f={name:"ConsoleProgrammes",data:function(){return{NewProgrammeView:!1,Programme:null,days:u.a.days,form:{name:"",image:"",description:"",venue:""}}},computed:Object(c["c"])(["programmes"]),components:{ConsoleHeader:o["a"],ConsoleFooter:m["a"]},methods:Object(n["a"])({},Object(c["b"])(["fetchProgrammes","deleteProgramme","createProgramme","updateProgramme"]),{handleNewProgramme:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.createProgramme(e.form);case 2:e.NewProgrammeView=!1;case 3:case"end":return t.stop()}}),t)})))()},newProgrammeView:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.NewProgrammeView=!0,e.Programme=null;case 2:case"end":return t.stop()}}),t)})))()},loadProgrammeView:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.NewProgrammeView=!1,e.Programme=null;case 2:case"end":return t.stop()}}),t)})))()},filterProgramme:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.Programme=t.programmes.filter((function(t){return t.id===e})),t.Programme.length>0&&(t.Programme=t.Programme[0],t.NewProgrammeView=null);case 2:case"end":return r.stop()}}),r)})))()},changeImage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.image=e.$refs.image.files[0],r=new FormData,r.append("upload_preset","programmes"),r.append("tags","unsigned upload, programmes"),r.append("file",e.image),t.next=7,g.a.post("https://api.cloudinary.com/v1_1/cacsafpi/upload",r);case 7:if(a=t.sent,null===a.data.secure_url){t.next=21;break}return s=e.Programme.image,e.Programme.image=a.data.secure_url,t.next=13,e.updateProgramme({id:e.Programme.id,programme:e.Programme});case 13:t.t0=s,t.next=""===t.t0?16:null===t.t0?17:18;break;case 16:return t.abrupt("break",21);case 17:return t.abrupt("break",21);case 18:return t.next=20,p["a"].removeImage({old_image:s});case 20:return t.abrupt("break",21);case 21:case"end":return t.stop()}}),t)})))()},handleDeleteProgramme:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.programmes.filter((function(t){return t.id===e})),!(a.length>0)){r.next=13;break}if(null===a[0].image){r.next=11;break}return r.next=5,p["a"].removeImage({old_image:a[0].image});case 5:if(s=r.sent,0!==s.data.error){r.next=9;break}return r.next=9,t.deleteProgramme(e);case 9:r.next=13;break;case 11:return r.next=13,t.deleteProgramme(e);case 13:case"end":return r.stop()}}),r)})))()},handleUpdatedProgramme:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null===e.Programme){t.next=3;break}return t.next=3,e.updateProgramme({id:e.Programme.id,programme:e.Programme});case 3:case"end":return t.stop()}}),t)})))()}}),created:function(){this.fetchProgrammes()}},v=f,h=(r("d716a"),r("2877")),b=Object(h["a"])(v,a,s,!1,null,"bac2a3e0",null);t["default"]=b.exports},d716a:function(e,t,r){"use strict";var a=r("a869"),s=r.n(a);s.a}}]);
//# sourceMappingURL=chunk-c46dd08c.468dd820.js.map